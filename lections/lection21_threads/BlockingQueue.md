## **–ß—Ç–æ —Ç–∞–∫–æ–µ `BlockingQueue` –≤ Java?**

### **üìå –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**

`BlockingQueue` ‚Äì —ç—Ç–æ **–ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å**, –∫–æ—Ç–æ—Ä–∞—è:

- **–û–∂–∏–¥–∞–µ—Ç** –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–∑—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞.
- **–û–∂–∏–¥–∞–µ—Ç** –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–ª–æ–∂–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞.

üöÄ `BlockingQueue` –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º**, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å-–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å (Producer-Consumer)**.

---

## **üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã `BlockingQueue`**

|–ú–µ—Ç–æ–¥|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|
|`put(E e)`|–î–æ–±–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç. –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ ‚Äì –∂–¥–µ—Ç.|
|`take()`|–£–±–∏—Ä–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç. –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞ ‚Äì –∂–¥–µ—Ç.|
|`offer(E e)`|–ü—ã—Ç–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å, –Ω–æ –Ω–µ –∂–¥–µ—Ç (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `false`, –µ—Å–ª–∏ –Ω–µ—Ç –º–µ—Å—Ç–∞).|
|`poll()`|–ü—ã—Ç–∞–µ—Ç—Å—è –≤–∑—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç, –Ω–æ –Ω–µ –∂–¥–µ—Ç (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`, –µ—Å–ª–∏ –ø—É—Å—Ç–æ).|
|`poll(long timeout, TimeUnit unit)`|–ü—ã—Ç–∞–µ—Ç—Å—è –≤–∑—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç, –Ω–æ –∂–¥–µ—Ç `timeout`.|
|`remainingCapacity()`|–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç –≤ –æ—á–µ—Ä–µ–¥–∏.|

> **`put()` –∏ `take()` ‚Äì –±–ª–æ–∫–∏—Ä—É—é—Ç –ø–æ—Ç–æ–∫, `offer()` –∏ `poll()` ‚Äì –Ω–µ—Ç.**

---

## **üîπ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `BlockingQueue`**

### 1Ô∏è‚É£ **`LinkedBlockingQueue<E>`**

- **–†–∞–∑–º–µ—Ä –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å (`new LinkedBlockingQueue<>(10)`) –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º.**
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **–¥–≤—É—Ö –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞—Ö** (–¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏), —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ—ë —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π.
- **–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –∑–∞–¥–∞—á.**

```java
BlockingQueue<Integer> queue = new LinkedBlockingQueue<>(3);
```

### 2Ô∏è‚É£ **`ArrayBlockingQueue<E>`**

- **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä (`new ArrayBlockingQueue<>(10)`)**.
- –û—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –º–∞—Å—Å–∏–≤–µ (–±—ã—Å—Ç—Ä–µ–µ, —á–µ–º `LinkedBlockingQueue` –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö).
- **–õ—É—á—à–µ –¥–ª—è –∑–∞–¥–∞—á —Å –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤.**

```java
BlockingQueue<Integer> queue = new ArrayBlockingQueue<>(5);
```

### 3Ô∏è‚É£ **`PriorityBlockingQueue<E>`**

- –≠–ª–µ–º–µ–Ω—Ç—ã **—É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã** (–ø–æ `Comparable` –∏–ª–∏ `Comparator`).
- –ü–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –≤–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á.

```java
BlockingQueue<Integer> queue = new PriorityBlockingQueue<>();
```

### 4Ô∏è‚É£ **`DelayQueue<E>`**

- –•—Ä–∞–Ω–∏—Ç **—ç–ª–µ–º–µ–Ω—Ç—ã —Å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏**.
- –≠–ª–µ–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –∑–∞–±–∏—Ä–∞—Ç—å **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞**.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **—Ç–∞–π–º–µ—Ä–æ–≤, –∑–∞–¥–∞—á —Å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º**.

```java
BlockingQueue<Delayed> queue = new DelayQueue<>();
```

---

## **üîπ –ü—Ä–∏–º–µ—Ä: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å**

–ü—Ä–æ–≥—Ä–∞–º–º–∞, –≥–¥–µ **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∫–ª–∞–¥–µ—Ç —á–∏—Å–ª–∞ –≤ –æ—á–µ—Ä–µ–¥—å**, –∞ **–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∏—Ö –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç**.

```java
import java.util.concurrent.*;

class Producer implements Runnable {
    private final BlockingQueue<Integer> queue;

    public Producer(BlockingQueue<Integer> queue) {
        this.queue = queue;
    }

    @Override
    public void run() {
        try {
            for (int i = 1; i <= 5; i++) {
                System.out.println("–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∫–ª–∞–¥–µ—Ç: " + i);
                queue.put(i); // –ñ–¥–µ—Ç, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞
                Thread.sleep(1000);
            }
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
}

class Consumer implements Runnable {
    private final BlockingQueue<Integer> queue;

    public Consumer(BlockingQueue<Integer> queue) {
        this.queue = queue;
    }

    @Override
    public void run() {
        try {
            while (true) {
                Integer item = queue.take(); // –ñ–¥–µ—Ç, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞
                System.out.println("–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∑–∞–±—Ä–∞–ª: " + item);
                Thread.sleep(2000);
            }
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
}

public class BlockingQueueExample {
    public static void main(String[] args) {
        BlockingQueue<Integer> queue = new LinkedBlockingQueue<>(3);

        new Thread(new Producer(queue)).start();
        new Thread(new Consumer(queue)).start();
    }
}
```

### **üìå –í—ã–≤–æ–¥**

```
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∫–ª–∞–¥–µ—Ç: 1
–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∑–∞–±—Ä–∞–ª: 1
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∫–ª–∞–¥–µ—Ç: 2
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∫–ª–∞–¥–µ—Ç: 3
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∫–ª–∞–¥–µ—Ç: 4
–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∑–∞–±—Ä–∞–ª: 2
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∫–ª–∞–¥–µ—Ç: 5
–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∑–∞–±—Ä–∞–ª: 3
```

‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∂–¥–µ—Ç, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞**.  
‚úÖ **–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∂–¥–µ—Ç, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞**.

---

## **üîπ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `BlockingQueue`?**

‚úî –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ **–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö** –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.  
‚úî –ï—Å–ª–∏ **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–∞–∑–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é**.  
‚úî –ï—Å–ª–∏ –≤–∞–∂–Ω–æ **–æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ—á–µ—Ä–µ–¥—å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ArrayBlockingQueue(5)`).  
‚úî –í **–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö**, –≥–¥–µ –ø–æ—Ç–æ–∫–∏ –¥–æ–ª–∂–Ω—ã **–æ–∂–∏–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ** –±–µ–∑ `while(true)`.

---

## **üîπ –ò—Ç–æ–≥**

‚úÖ `BlockingQueue` ‚Äì –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å, –∫–æ—Ç–æ—Ä–∞—è **–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏**.  
‚úÖ `put()` –∏ `take()` **–æ–∂–∏–¥–∞—é—Ç**, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞ –∏–ª–∏ –ø—É—Å—Ç–∞.  
‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å-–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å**, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.